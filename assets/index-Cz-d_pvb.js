(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function o(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(e){if(e.ep)return;e.ep=!0;const s=o(e);fetch(e.href,s)}})();function E(n,t){const o=n.length+1,l=t.length+1,e=new Array(o).fill(0).map(()=>new Array(l).fill(0)),s=new Array(o-1).fill(0).map(()=>new Array().fill(""));for(let r=1;r<o;r++)for(let a=1;a<l;a++)n[r-1]==t[a-1]?(e[r][a]=e[r-1][a-1]+1,s[r-1][a-1]="↖"):e[r-1][a]>=e[r][a-1]?(e[r][a]=e[r-1][a],s[r-1][a-1]="↑"):(e[r][a]=e[r][a-1],s[r-1][a-1]="←");return{weights:e,paths:s,query:[n,t]}}const d=document.querySelector(":root"),g=document.querySelector(".grid"),m=new Map([["←",[-1,0]],["↑",[0,-1]],["↖",[-1,-1]]]),c={grid:"grid",label:"label",items:"items",box:"box",even:"even",footer:"footer",animationControls:"animation-controls",result:"result",resultItem:"result-item"};function b(n){const{footer:t,result:o,lcs:l}=n;let e;for(;e=t.lastChild;)e.remove();const s=document.createElement("div");s.classList.add(c.result),s.appendChild(document.createTextNode(`LCS(${l.query[0]}, ${l.query[1]}) = ${o||"no match"}`)),t.appendChild(s)}function h(n){const{colElement:t,rowElement:o,itemElement:l,lcs:e,items:s}=n;l.ontransitionend=null;const[r]=l.textContent;if(r=="0")return b(n);let a=0;for(let y of m.keys()){if(y!=r){a++;continue}a==2?(t.dataset.selected="match",o.dataset.selected="match",n.result+=t.textContent,n.colElement=t.previousElementSibling,n.rowElement=o.previousElementSibling):a==1?n.rowElement=o.previousElementSibling:n.colElement=t.previousElementSibling;break}const i=parseInt(l.dataset.col)+m.get(r)[0],w=(parseInt(l.dataset.row)+m.get(r)[1])*e.weights[0].length+i,u=s[w];n.itemElement=u,u.ontransitionend=()=>h(n),u.dataset.selected="true"}function C(n){const{rowElement:t,colElement:o,itemElement:l,b:e,lcs:s}=n,r=parseInt(l.dataset.col),a=parseInt(l.dataset.row);l.textContent=`${s.paths[a-1][r-1]}${s.weights[a][r]}`,e.ontransitionend=null,e.dataset.selected="false";let i;if(o.dataset.selected="false",i=o.nextElementSibling)return l.dataset.selected="false",n.colElement=i,f(n);if(t.dataset.selected="false",i=t.nextElementSibling){l.dataset.selected="false",n.colElement=o.parentElement.firstElementChild,n.rowElement=i,i.ontransitionend=()=>f(n),i.dataset.selected="true";return}e.ontransitionend=()=>h(n)}function v(n){const{itemElement:t,items:o,lcs:l}=n;t.ontransitionend=null;const[e]=t.textContent,s=parseInt(t.dataset.col)+m.get(e)[0],a=(parseInt(t.dataset.row)+m.get(e)[1])*l.weights[0].length+s,i=o[a];i.ontransitionend=()=>C({...n,b:i}),i.dataset.selected="true"}function S(n){const{colElement:t,rowElement:o,lcs:l,items:e}=n;t.ontransitionend=null;const s=parseInt(t.dataset.col)+1,a=(parseInt(o.dataset.row)+1)*l.weights[0].length+s,i=e[a];n.itemElement=e[a],i.ontransitionend=()=>v(n),i.dataset.selected="true"}function f(n){const{rowElement:t,colElement:o}=n;t.ontransitionend=null,o.ontransitionend=()=>S(n),t.textContent==o.textContent?(o.dataset.selected="match",t.dataset.selected="match"):(o.dataset.selected="true",t.dataset.selected="true")}function $(n,t,o){const e=window.getComputedStyle(d).getPropertyValue("--delay");let s=parseInt(e.slice(0,e.indexOf("ms")))+50;if(s>500){n.disabled=!0;return}const r=n.nextElementSibling;r==null||r.removeAttribute("disabled"),d.style.setProperty("--delay",`${s}ms`),t.dataset.content=`${s}ms`,clearTimeout(o.id),o.id=setTimeout(()=>{t.dataset.content="animation speed"},1200)}function I(n,t,o){const e=window.getComputedStyle(d).getPropertyValue("--delay");let s=parseInt(e.slice(0,e.indexOf("ms")))-50;if(s<=0){n.disabled=!0;return}const r=n.previousElementSibling;r==null||r.removeAttribute("disabled"),d.style.setProperty("--delay",`${s}ms`),t.dataset.content=`${s}ms`,clearTimeout(o.id),o.id=setTimeout(()=>{t.dataset.content="animation speed"},1200)}function p(n,t){const o=document.createElement("div");o.classList.add(c.label);const l=t=="row"?0:1;for(let e=0;e<n.lcs.query[l].length;e++){const s=document.createElement("span");s.classList.add(c.box),s.dataset.selected="false",s.textContent=n.lcs.query[l][e],t=="row"?s.dataset.row=`${e}`:s.dataset.col=`${e}`,e||(n[t=="row"?"rowElement":"colElement"]=s),o.appendChild(s)}return o.dataset.flow=t,o}function L(n){const t=document.createElement("div");t.classList.add(c.items);for(let o=0;o<n.lcs.weights.length;o++)for(let l=0;l<n.lcs.weights[0].length;l++){const e=document.createElement("span");e.classList.add(c.box),e.dataset.selected="false",e.dataset.row=`${o}`,e.dataset.col=`${l}`,o&&l?e.textContent=`${n.lcs.paths[o-1][l-1]}0`:e.textContent="0",t.appendChild(e)}return n.items=Array.from(t.children),t}function A(n){const t=document.createElement("div");t.classList.add(c.footer);const o={id:void 0},l=document.createElement("div");l.classList.add(c.animationControls),l.dataset.content="animation speed";for(let e=0;e<2;e++){const s=document.createElement("button");s.textContent=e?"+":"-",e?s.onclick=()=>I(s,l,o):(s.toggleAttribute("disabled"),s.onclick=()=>$(s,l,o)),l.appendChild(s)}return t.appendChild(l),n.footer=t,t}function q(n,t){let o;for(;o=n.lastChild;)o.remove();n.appendChild(p(t,"row")),n.appendChild(p(t,"col")),n.appendChild(L(t)),n.appendChild(A(t))}function P(n){d.style.setProperty("--length",`${n.weights[0].length}`),d.style.setProperty("--delay","500ms");const t={lcs:n,result:""};q(g,t),requestAnimationFrame(()=>{t.rowElement.ontransitionend=()=>f(t),t.rowElement.dataset.selected="true"})}document.querySelector(".request-form").onsubmit=async n=>{n.preventDefault();const t=n.currentTarget,o=Array.from(t.children);P(E(o[0].value,o[1].value))};
